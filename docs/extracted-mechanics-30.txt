// Flipper to Tidal Scar Sync
const audio = new AudioContext(); // Sine swell + noise gurgle
const osc = audio.createOscillator(); osc.frequency.setValueAtTime(200, audio.currentTime); // Hum
const noiseGain = audio.createGain(); noiseGain.gain.setValueAtTime(0.2, audio.currentTime + 0.25); // Twist
osc.connect(audio.destination).start();

// Haptic Sync: Audio envelope drives pulses
const envelope = (time) => 0.5 + 0.5 * Math.sin(time * 0.2); // Perlin-ish curve
setInterval(() => {
  const intensity = envelope(audio.currentTime) * 0.3; // 0-0.3g
  Haptics.vibrate({ duration: 100 * intensity }); // Capacitor tie
}, 100); // 10Hz sync to low-end