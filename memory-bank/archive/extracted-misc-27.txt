function spawnRiftGuardian(riftSeed, oldGrudge) {
  const id = addEntity(world, [Position, Guardian]);
  Position.x[id] = riftPos.x; Position.y[id] = riftPos.y;
  Guardian.echoAff[id] = oldGrudge | noiseSeed(riftSeed); // Hybrid
  Guardian.momentum[id] = 100;
  Guardian.phase[id] = 1;
  const guardianYuka = new Yuka.Vehicle(); // Core entity
  guardianYuka.position.set(riftPos.x, riftPos.y, 0);
  guardianYuka.steering.add(new Yuka.SeekBehavior(playerPos)); // Lunge phases
  // Phase tick
  setInterval(() => {
    if (Guardian.momentum[id] <= 0) {
      Guardian.phase[id]++;
      if (Guardian.phase[id] > 5) resolveGuardian(id, 'win');
    } else if (Guardian.momentum[id] > 200) resolveGuardian(id, 'loss');
  }, phaseTime);
}

function gestureFold(gestureType, targetId) { // From touch
  const guardian = getGuardian(targetId);
  const resMod = traitResonance(playerTraits, Guardian.echoAff[targetId]);
  let drain = 20 + resMod * 10; // Swipe/pinch etc.
  if (gestureType === 'pinch') drain += 15; // Siphon extra
  Guardian.momentum[targetId] -= drain;
  if (gestureType === 'spread') { // Weave
    if (behavior.harmony > 0.6) hybridBiome(riftPos, Guardian.echoAff[targetId]);
  }
  // Pack flank if dispatched
  if (activePack) yukaFlank(activePack, guardianYuka);
  hapticImpact(gestureType); // Capacitor buzz
}

function resolveGuardian(id, outcome) {
  if (outcome === 'win') {
    const relicClutch = generateBridgeRelic(Guardian.echoAff[id]);
    useGame.setState({ shardVault: [...get().shardVault, ...relicClutch], hopBonus: 'guardianEcho' });
    hopToNewWorld(); // Seamless
  } else {
    // Loss: Stranded
    spawnLimboChunk(riftPos);
    useGame.setState({ evoPoints: get().evoPoints * 0.7, packRegistry: scatterPacks(get().packRegistry) });
  }
  removeEntity(id);
}