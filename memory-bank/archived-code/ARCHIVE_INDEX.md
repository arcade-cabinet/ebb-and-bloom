# Archived Code Reference - Ebb and Bloom

**Date Archived**: 2025-11-07  
**Reason**: Transition from monolithic React Three Fiber frontend to algorithm-first backend architecture

## Overview

This archive contains the original React Three Fiber frontend and ECS systems that were built before the comprehensive algorithm-first redesign. The code here represents significant work but was fundamentally redesigned based on architectural insights described in `docs/WORLD.md` and the implementation documented in `memory-bank/BEAST_MODE_COMPLETE.md`.

## What Was Archived

### Original Frontend (`src/` → `archived-code/legacy-frontend/`)
- **React Three Fiber Components**: Full 3D rendering system
- **ECS Systems**: 17 systems including YukaSphereCoordinator, CreatureArchetypeSystem, etc.
- **Zustand State Management**: EvolutionDataStore and related state
- **React Components**: UI components, renderers, evolution displays
- **Test Suites**: Comprehensive test coverage for the original approach

### Development Tools (`src/dev/` → `archived-code/dev-tools/`)
- **Meshy Integration**: 3D model generation tools
- **Asset Generation**: Texture downloaders, audio manifests
- **CLI Tools**: GameDevCLI and related tooling

## Why It Was Archived

The original approach conflated several concerns:

1. **ECS as Business Logic**: ECS was used for game logic when it should only handle data and rendering
2. **Frontend-Heavy**: Game simulation was embedded in React components
3. **Hardcoded Values**: Systems used magic numbers instead of AI-generated content
4. **Yuka Underutilization**: Only used 3 of 10+ Yuka systems available

The new architecture (in `packages/backend/`) addresses these by:

1. **Backend-First**: Game logic as REST APIs
2. **Pure Algorithms**: Mathematical simulation without rendering
3. **AI-Sourced Data**: All parameters generated by OpenAI workflows
4. **Full Yuka Integration**: Complete use of Yuka's AI systems

## What Replaced It

### New Backend (`packages/backend/`)
- **Gen 0-6 Systems**: Complete generational evolution from planet formation to religion
- **Real Physics**: Yuka CohesionBehavior for planetary accretion
- **AI Integration**: OpenAI data pools for all content generation
- **RESTful APIs**: Clean separation of simulation from rendering
- **Comprehensive Testing**: End-to-end tests proving mathematical correctness

### Future Frontend (Planned)
- **Simple Sphere Viewer**: Just rotate/zoom a planet sphere
- **Content Addressable**: Click lat/lon coordinates to query backend
- **Minimal ECS**: Only for rendering, not game logic
- **Real-time Updates**: Poll backend for active points (creatures, tribes)

## Key Architectural Lessons

1. **Don't mix rendering with simulation logic**
2. **AI should generate content parameters, not code**
3. **Study libraries properly** (Yuka examples, not guessing)
4. **Think macro → meso → micro before implementation**
5. **Backend-first allows multiple frontends** (3D, CLI, mobile)

## Reference Value

This archived code contains valuable implementations for:

- **React Three Fiber patterns** for future 3D rendering
- **Yuka integration examples** (steering behaviors, flocking)
- **ECS architecture** for rendering systems
- **Texture systems** and material loading
- **UI patterns** with @react-three/uikit

The code is well-tested and functional - it was archived for architectural reasons, not quality issues.

## File Organization

```
memory-bank/archived-code/
├── ARCHIVE_INDEX.md (this file)
├── legacy-frontend/
│   ├── components/         # React Three Fiber renderers
│   ├── systems/           # Original ECS systems  
│   ├── stores/            # Zustand state management
│   ├── hooks/             # React hooks
│   ├── contexts/          # React contexts
│   ├── world/             # ECS world definitions
│   ├── utils/             # Utility functions
│   ├── test/              # Test suites
│   └── styles/            # CSS and styling
├── dev-tools/
│   ├── meshy/             # 3D model generation
│   ├── asset-generation/  # Texture/audio tools
│   └── cli/               # Development CLI tools
├── build-config/
│   ├── vite.config.ts     # Vite configuration
│   ├── capacitor.config.ts # Mobile build config
│   └── tsconfig.json      # TypeScript config
└── documentation/
    ├── original-README.md  # Original project README
    ├── api-docs/          # Original API documentation
    └── architecture/      # Original architecture docs
```

This archive serves as a reference for future development and as evidence of the evolution in architectural thinking that led to the current backend-first approach.